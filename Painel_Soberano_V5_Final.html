<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LAB-NEXUS | C137 Sovereign OS</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@300;400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #C5A059; --bg: #050505; --surface: #121212; --glass: rgba(15,15,15,0.95);
        }

        body {
            background: var(--bg); color: #fff; font-family: 'Inter', sans-serif;
            margin: 0; padding-bottom: 90px; overflow-x: hidden;
        }

        /* --- NAVEGA√á√ÉO ENTRE TELAS --- */
        .view { display: none; animation: fadeIn 0.3s ease-out; padding: 20px; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- PERFIL HEADER --- */
        .mini-profile {
            padding: 20px; display: flex; align-items: center; gap: 15px;
            background: linear-gradient(to bottom, #151515, transparent);
            margin-bottom: 10px;
        }
        .avatar-sm {
            width: 45px; height: 45px; border-radius: 12px; border: 1px solid var(--gold);
            display: flex; align-items: center; justify-content: center; 
            color: var(--gold); font-family: 'Cinzel'; font-weight: bold;
        }

        /* --- GRID DE SERVI√áOS --- */
        .services-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .service-card {
            background: var(--surface); padding: 25px 15px; border-radius: 20px;
            border: 1px solid #222; text-align: center; cursor: pointer;
        }
        .service-card i { color: var(--gold); margin-bottom: 10px; }
        .service-card b { display: block; font-size: 0.8rem; margin-bottom: 4px; }
        .service-card small { color: #555; font-size: 0.6rem; text-transform: uppercase; }

        /* --- ELEMENTOS DE LISTA E FORM --- */
        .list-item {
            background: #0a0a0a; border: 1px solid #1a1a1a; padding: 18px;
            border-radius: 15px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center;
        }
        .input-box { margin-bottom: 15px; }
        .input-box label { display: block; font-size: 0.6rem; color: var(--gold); margin-bottom: 6px; letter-spacing: 1px; }
        .input-nexus {
            width: 100%; background: #000; border: 1px solid #333; padding: 12px;
            color: #fff; border-radius: 10px; font-family: 'JetBrains Mono'; font-size: 0.85rem;
            box-sizing: border-box;
        }

        /* --- BOT√ïES --- */
        .btn-gold {
            background: var(--gold); color: #000; border: none; padding: 16px;
            border-radius: 12px; font-weight: bold; width: 100%; font-family: 'Cinzel'; cursor: pointer;
        }
        .btn-outline {
            background: transparent; color: #fff; border: 1px solid #333; padding: 16px;
            border-radius: 12px; width: 100%; cursor: pointer;
        }

        /* --- NAV BAR INFERIOR --- */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 75px;
            background: var(--glass); backdrop-filter: blur(15px);
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid #222; z-index: 9999;
        }
        .nav-btn { color: #444; text-align: center; font-size: 0.65rem; cursor: pointer; }
        .nav-btn.active { color: var(--gold); }
    </style>
</head>
<body>

    <div id="view-home" class="view active">
        <div class="mini-profile">
            <div class="avatar-sm" id="nav-initial">L</div>
            <div>
                <b id="nav-alias" style="color:var(--gold); letter-spacing:1px;">$LABRIOLAG</b><br>
                <small style="color:#555" id="nav-phrase">ARQUITETO SOBERANO</small>
            </div>
        </div>

        <div class="services-grid">
            <div class="service-card" onclick="switchView('view-catalog')">
                <i data-lucide="file-plus-2"></i>
                <b>LAVRAR ATO</b>
                <small>Novos Contratos</small>
            </div>
            <div class="service-card" onclick="switchView('view-bunker')">
                <i data-lucide="archive"></i>
                <b>BUNKER</b>
                <small>Meus Registros</small>
            </div>
            <div class="service-card" onclick="switchView('view-profile')">
                <i data-lucide="user-circle"></i>
                <b>PERFIL</b>
                <small>Chaves e ID</small>
            </div>
            <div class="service-card" onclick="alert('Verificador de Hash em desenvolvimento...')">
                <i data-lucide="fingerprint"></i>
                <b>VERIFICAR</b>
                <small>Validar Selo</small>
            </div>
        </div>
    </div>

    <div id="view-catalog" class="view">
        <div id="catalog-main">
            <h2 style="font-family:'Cinzel'; color:var(--gold); margin-bottom:20px;">CAT√ÅLOGO</h2>
            <div id="category-list"></div>
            <button class="btn-outline" style="margin-top:20px;" onclick="switchView('view-home')">VOLTAR</button>
        </div>

        <div id="form-dynamic" style="display:none;">
            <h2 id="dynamic-title" style="font-family:'Cinzel'; color:var(--gold); margin-bottom:5px;"></h2>
            <p id="dynamic-desc" style="font-size:0.75rem; color:#555; margin-bottom:25px;"></p>
            <div id="dynamic-fields"></div>
            <div style="display:flex; gap:12px; margin-top:25px;">
                <button class="btn-outline" onclick="backToCatalog()">VOLTAR</button>
                <button class="btn-gold" onclick="processSeal()">SELAR ATO üìú</button>
            </div>
        </div>
    </div>

    <div id="view-bunker" class="view">
        <h2 style="font-family:'Cinzel'; color:var(--gold);">BUNKER</h2>
        <p style="color:#555; font-size:0.75rem; margin-bottom:20px;">Registros matem√°ticos locais.</p>
        <div id="bunker-list"></div>
        <button class="btn-outline" style="margin-top:20px;" onclick="switchView('view-home')">P√ÅGINA INICIAL</button>
    </div>

    <div id="view-profile" class="view">
        <h2 style="font-family:'Cinzel'; color:var(--gold);">PERFIL SOBERANO</h2>
        <div class="input-box">
            <label>ID SOBERANO (ALIAS)</label>
            <input type="text" id="edit-alias" class="input-nexus">
        </div>
        <div class="input-box">
            <label>FRASE DE EFEITO</label>
            <input type="text" id="edit-phrase" class="input-nexus">
        </div>
        <div class="input-box">
            <label>CHAVE LIGHTNING / PIX / LIQUID</label>
            <input type="text" id="edit-key" class="input-nexus">
        </div>
        <button class="btn-gold" onclick="saveProfile()">GRAVAR NO DISPOSITIVO</button>
    </div>

    <nav>
        <div class="nav-btn active" onclick="switchView('view-home')" id="btn-home"><i data-lucide="home"></i><br>In√≠cio</div>
        <div class="nav-btn" onclick="switchView('view-catalog')" id="btn-catalog"><i data-lucide="plus-square"></i><br>Lavrar</div>
        <div class="nav-btn" onclick="switchView('view-bunker')" id="btn-bunker"><i data-lucide="database"></i><br>Bunker</div>
        <div class="nav-btn" onclick="switchView('view-profile')" id="btn-profile"><i data-lucide="settings"></i><br>Ajustes</div>
    </nav>

<script>
    // 1. CONFIGURA√á√ÉO DE TEMPLATES
    const CONTRACT_TEMPLATES = {
        locacao: { title: "Loca√ß√£o de Im√≥vel", desc: "Residencial ou Comercial", icon: "home", fields: ["Locador", "Locat√°rio", "Endere√ßo", "Valor (Sats/Reais)", "Prazo"] },
        prestacao: { title: "Presta√ß√£o de Servi√ßo", desc: "Freelancers e Profissionais", icon: "briefcase", fields: ["Contratante", "Prestador", "Servi√ßo", "Valor Total", "Data Entrega"] },
        compra: { title: "Compra e Venda", desc: "Transfer√™ncia de Bens", icon: "shopping-bag", fields: ["Vendedor", "Comprador", "Objeto", "Valor", "Condi√ß√µes"] },
        nascimento: { title: "Registro Civil", desc: "Certifica√ß√£o C137 de Vida", icon: "baby", fields: ["Nome Crian√ßa", "Genitores", "Data/Hora", "Local"] }
    };

    // 2. MOTOR DE NAVEGA√á√ÉO
    function switchView(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        const btnId = 'btn-' + viewId.split('-')[1];
        if(document.getElementById(btnId)) document.getElementById(btnId).classList.add('active');
    }

    // 3. MOTOR DE FORMUL√ÅRIOS
    function renderCatalog() {
        const list = document.getElementById('category-list');
        list.innerHTML = Object.keys(CONTRACT_TEMPLATES).map(key => `
            <div class="list-item" onclick="openForm('${key}')">
                <div><b>${CONTRACT_TEMPLATES[key].title}</b><br><small>${CONTRACT_TEMPLATES[key].desc}</small></div>
                <i data-lucide="${CONTRACT_TEMPLATES[key].icon}" size="18" style="color:var(--gold)"></i>
            </div>
        `).join('');
        lucide.createIcons();
    }

    function openForm(key) {
        const template = CONTRACT_TEMPLATES[key];
        document.getElementById('catalog-main').style.display = 'none';
        document.getElementById('form-dynamic').style.display = 'block';
        document.getElementById('dynamic-title').innerText = template.title;
        document.getElementById('dynamic-desc').innerText = template.desc;
        
        const fieldsArea = document.getElementById('dynamic-fields');
        fieldsArea.innerHTML = template.fields.map(f => `
            <div class="input-box">
                <label>${f.toUpperCase()}</label>
                <input type="text" class="input-nexus dyn-input" data-label="${f}" placeholder="Digitar...">
            </div>
        `).join('');
    }

    function backToCatalog() {
        document.getElementById('catalog-main').style.display = 'block';
        document.getElementById('form-dynamic').style.display = 'none';
    }

    // 4. SELAGEM E BUNKER
    function processSeal() {
        const inputs = document.querySelectorAll('.dyn-input');
        const docTitle = document.getElementById('dynamic-title').innerText;
        let summary = `ATO: ${docTitle}\n`;
        inputs.forEach(i => summary += `${i.getAttribute('data-label')}: ${i.value}\n`);

        const hash = "C137-" + Math.random().toString(36).substring(2, 10).toUpperCase();
        
        // Guardar no Bunker Local
        const bunker = JSON.parse(localStorage.getItem('c137_bunker') || '[]');
        bunker.unshift({ id: Date.now(), title: docTitle, hash: hash, date: new Date().toLocaleDateString() });
        localStorage.setItem('c137_bunker', JSON.stringify(bunker));
        
        alert(`SELAGEM CONCLU√çDA!\n\nID: ${hash}\n\nO documento foi movido para o Bunker.`);
        renderBunker();
        switchView('view-bunker');
        backToCatalog();
    }

    function renderBunker() {
        const list = document.getElementById('bunker-list');
        const data = JSON.parse(localStorage.getItem('c137_bunker') || '[]');
        
        if(data.length === 0) {
            list.innerHTML = '<div style="text-align:center; padding:40px; color:#333;"><i data-lucide="database-zap" size="40"></i><br>Bunker Vazio</div>';
        } else {
            list.innerHTML = data.map(item => `
                <div class="list-item">
                    <div><b>${item.title}</b><br><small>Selo: ${item.hash} | ${item.date}</small></div>
                    <i data-lucide="check-circle" style="color:var(--gold)"></i>
                </div>
            `).join('');
        }
        lucide.createIcons();
    }

    // 5. PERFIL
    function saveProfile() {
        const profile = {
            alias: document.getElementById('edit-alias').value || "$LABRIOLAG",
            phrase: document.getElementById('edit-phrase').value || "ARQUITETO SOBERANO",
            key: document.getElementById('edit-key').value
        };
        localStorage.setItem('c137_profile', JSON.stringify(profile));
        updateProfileUI();
        alert("Identidade Atualizada!");
        switchView('view-home');
    }

    function updateProfileUI() {
        const saved = JSON.parse(localStorage.getItem('c137_profile') || '{"alias":"$LABRIOLAG","phrase":"ARQUITETO SOBERANO"}');
        document.getElementById('nav-alias').innerText = saved.alias;
        document.getElementById('nav-phrase').innerText = saved.phrase;
        document.getElementById('nav-initial').innerText = saved.alias.replace('$', '').charAt(0).toUpperCase();
        
        document.getElementById('edit-alias').value = saved.alias;
        document.getElementById('edit-phrase').value = saved.phrase;
        document.getElementById('edit-key').value = saved.key || "";
    }

    // INICIAR
    window.onload = () => {
        lucide.createIcons();
        updateProfileUI();
        renderCatalog();
        renderBunker();
    };
</script>
</body>
</html>
